<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ΄μ„λ„¤ λ¶€μλκΈ°</title>
    <link rel="stylesheet" href="style.css">
    <script src="main.js" defer></script>
</head>
<body>

    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
    </div>

    <div id="app">
        <header>
            <h1>μ΄μ„λ„¤ λ¶€μλκΈ°</h1>
        </header>

        <main>
            <section class="form-section">
                <form id="exchange-form">
                    <fieldset>
                        <legend>μƒ ν™μ „ κΈ°λ΅ μ¶”κ°€</legend>
                        
                        <div class="form-group">
                            <label>κ±°λμ</label>
                            <div class="radio-group">
                                <input type="radio" id="trader-sw" name="trader" value="SW">
                                <label for="trader-sw"><b>SW</b></label>
                                <input type="radio" id="trader-hr" name="trader" value="HR">
                                <label for="trader-hr"><b>HR</b></label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="target-currency">κ±°λ ν†µν™”</label>
                            <select id="target-currency" name="target_currency">
                                <option value="USD">USD - λ―Έκµ­ λ‹¬λ¬</option>
                                <option value="JPY">JPY - μΌλ³Έ μ—”</option>
                                <option value="EUR">EUR - μ λ΅</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="transaction-type">κ±°λ μΆ…λ¥</label>
                                <select id="transaction-type" name="type">
                                    <option value="buy">μ™Έν™” λ§¤μ (μ›ν™” β†’ μ™Έν™”)</option>
                                    <option value="sell">μ™Έν™” λ§¤λ„ (μ™Έν™” β†’ μ›ν™”)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="transaction-date">κ±°λ λ‚ μ§</label>
                                <input type="date" id="transaction-date" name="date" required>
                            </div>
                        </div>
                        
                        <div id="linked-buy-id-wrapper" class="form-group hidden">
                            <label for="linked-buy-id">μ–΄λ–¤ λ§¤μ… κ±΄μ„ λ§¤λ„ν•μ‹λ‚μ”?</label>
                            <select id="linked-buy-id" name="linked_buy_id"></select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="foreign-amount">κ±°λ μ™Έν™” κΈμ•΅</label>
                                <input type="text" inputmode="decimal" id="foreign-amount" name="foreign_amount" placeholder="μ: 100.00" required>
                            </div>
                            <div class="form-group">
                                <label for="exchange-rate">κ±°λ ν™μ¨</label>
                                <input type="text" inputmode="decimal" id="exchange-rate" name="exchange_rate" placeholder="μ: 1,320.30" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="base-amount">μ›ν™” ν™μ‚° κΈμ•΅</label>
                            <input type="text" inputmode="decimal" id="base-amount" name="base_amount" placeholder="μλ™ κ³„μ‚° λλ” μ§μ ‘ μ…λ ¥">
                        </div>
                        
                        <button type="submit">μ €μ¥</button>
                    </fieldset>
                </form>
            </section>
            
            <section class="dashboard-section">
                <h2>μ”μ•½ μ •λ³΄</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-item">
                        <h3>μ΄ μ‹¤ν„ μ†μµ</h3>
                        <p id="total-pl">0 μ›</p>
                    </div>
                    <div class="dashboard-item">
                        <h3>λ‹Ήμ›” μ†μµ</h3>
                        <p id="current-month-pl">0 μ›</p>
                    </div>
                    <div class="dashboard-item" id="monthly-pl-item">
                        <h3>μ›”λ³„ μ†μµ</h3>
                        <div class="monthly-selector-container">
                            <select id="monthly-pl-select"></select>
                            <p id="monthly-pl-result">0 μ›</p>
                        </div>
                    </div>
                    <div class="dashboard-item">
                        <h3>ν„μ¬ λ³΄μ  μ™Έν™”</h3>
                        <div id="current-holdings"><p>-</p></div>
                    </div>
                    <div class="dashboard-item">
                        <h3>ν†µν™”λ³„ ν‰κ·  λ§¤μ…κ°€</h3>
                        <div id="avg-buy-price"><p>-</p></div>
                    </div>
                </div>
            </section>

            <section class="limit-dashboard-section">
                <h2>ν•λ„ ν„ν™©</h2>
                <div class="limit-container">
                    <div class="limit-item">
                        <h3>μΌ λ§¤μ μ”μ—¬ν•λ„ (μµλ€ 1,000λ§μ›)</h3>
                        <div class="limit-tracker">
                            <span class="tracker-label">SW</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="daily-limit-sw-fill"></div>
                            </div>
                            <span class="tracker-remaining" id="daily-limit-sw-text">μ”μ—¬: 10,000,000μ›</span>
                        </div>
                        <div class="limit-tracker">
                            <span class="tracker-label">HR</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="daily-limit-hr-fill"></div>
                            </div>
                            <span class="tracker-remaining" id="daily-limit-hr-text">μ”μ—¬: 10,000,000μ›</span>
                        </div>
                    </div>
                    <div class="limit-item">
                        <h3>μ›” λ§¤μ μ”μ—¬ν•λ„ (μµλ€ 1μ–µμ›)</h3>
                        <div class="limit-tracker">
                            <span class="tracker-label">SW</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="monthly-limit-sw-fill"></div>
                            </div>
                            <span class="tracker-remaining" id="monthly-limit-sw-text">μ”μ—¬: 100,000,000μ›</span>
                        </div>
                        <div class="limit-tracker">
                            <span class="tracker-label">HR</span>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" id="monthly-limit-hr-fill"></div>
                            </div>
                            <span class="tracker-remaining" id="monthly-limit-hr-text">μ”μ—¬: 100,000,000μ›</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="calculator-section">
                <button id="toggle-calculator-btn" class="accordion-toggle" aria-expanded="false">
                    ν™μ¨ κ³„μ‚°κΈ° μ—΄κΈ° <span>β–Ό</span>
                </button>
                <div id="calculator-content" class="hidden">
                    <div class="calculator-inputs">
                        <div class="form-group">
                            <label>κ±°λμ</label>
                            <div class="radio-group">
                                <input type="radio" id="calc-trader-sw" name="calc-trader" value="SW">
                                <label for="calc-trader-sw"><b>SW</b></label>
                                <input type="radio" id="calc-trader-hr" name="calc-trader" value="HR"> <label for="calc-trader-hr"><b>HR</b></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="calc-buy-select">λ§¤μ κ±΄ μ„ νƒ</label>
                            <select id="calc-buy-select">
                                <option value="">-- κ±°λμλ¥Ό λ¨Όμ € μ„ νƒν•μ„Έμ” --</option>
                            </select>
                        </div>
                    </div>
                    <div id="calc-results-container" class="hidden">
                        <div class="chart-group">
                            <h4>μμµ μ‹λ‚λ¦¬μ¤</h4>
                            <div class="chart-container" id="profit-chart-container">
                                </div>
                        </div>
                        <div class="chart-group">
                            <h4>μ†μ‹¤ μ‹λ‚λ¦¬μ¤</h4>
                            <div class="chart-container" id="loss-chart-container">
                                </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="list-section">
                <h2>κ±°λ νμ¤ν† λ¦¬</h2>
                <div class="filter-controls">
                    <button class="filter-btn active" data-trader="all">μ „μ²΄</button>
                    <button class="filter-btn" data-trader="SW">SW</button>
                    <button class="filter-btn" data-trader="HR">HR</button>
                </div>
                <div class="table-container">
                    <table class="record-table">
                        <thead>
                            <tr>
                                <th>κ±°λκµ¬λ¶„</th>
                                <th>κ±°λμ</th>
                                <th>κ±°λμ‹κ°„</th>
                                <th>μ™Έν™”κµ¬λ¶„</th>
                                <th>μ™Έν™”κΈμ•΅</th>
                                <th>κ±°λν™μ¨</th>
                                <th>μ›ν™”ν™μ‚°κΈμ•΅</th>
                                <th>μ†μµ</th>
                                <th>κ΄€λ¦¬</th>
                            </tr>
                        </thead>
                        <tbody id="record-list-body"></tbody>
                    </table>
                </div>
            </section>
            <div class="pagination-controls">
                <button id="prev-page-btn" disabled>μ΄μ „</button>
                <span id="page-info">Page 1 / 1</span>
                <button id="next-page-btn" disabled>λ‹¤μ</button>
            </div>
        </main>
    </div>

    <template id="record-row-template">
        <tr>
            <td class="record-type"></td>
            <td class="record-trader"></td>
            <td class="record-date"></td>
            <td class="record-currency"></td>
            <td class="record-foreign-amount"></td>
            <td class="record-rate"></td>
            <td class="record-base-amount"></td>
            <td class="record-pl"></td>
            <td class="record-actions">
                <button class="edit-btn" title="μμ •">βοΈ</button>
                <button class="delete-btn" title="μ‚­μ ">π—‘οΈ</button>
            </td>
        </tr>
    </template>

</body>
</html>